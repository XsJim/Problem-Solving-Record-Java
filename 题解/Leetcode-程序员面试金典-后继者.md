# Leetcode-程序员面试金典-后继者

## 题目

原题
> 设计一个算法，找出二叉搜索树中指定节点的“下一个”节点（也即中序后继）。如果指定节点没有对应的“下一个”节点，则返回null。

示例 1
> 输入：
> `root = [2,1,3], p = 1`
> 输出：
> `2`

示例 2
> 输入：
> `root = [5,3,6,2,4,null,null,1], p = 6`
> 输出：
> `null`

## 题目分析

题目给定的是一个二叉搜索树，要找给定节点的中序后继，只需在这棵树的中序遍历的序列中找到该节点，并返回它的下一节点便可

实现这个目的，需要先中序遍历一次二叉搜索树，并将遍历序列储存，然后再遍历一次中序序列，找到该节点的下一位

如何实现能使这个过程更加高效呢？

给定的是一颗二叉搜索树，对于树中任意一个节点，左子树节点的值都小于该节点的值，右子树都大于该节点的值

假设我们已经找到了给定节点的父节点：

1. 父节点值比给定的节点值大，那么中序后继可能就是当前节点，也可能是给定节点的右子树中的某个节点
    1. 如果该节点没有右子树，那么中序后继就是父节点
    2. 如果该节点有右子树，那么中序后继就是右子树的最小节点
2. 父节点值比给定的节点值小，那么中序后继是给定节点的右子树中的某个节点

现在我们将这个过程推广到任意节点：

1. 如果当前节点值比给定的节点值大，那么中序后继可能就是当前节点，也可能是当前节点的左子树中的某个节点（因为给定节点一定在左子树中）
2. 如果当前节点值比给定的节点值小，那么中序后继一定在当前节点的右子树中
3. 如果当前节点值和给定节点值相等，那么中序后继一定在当前节点的右子树中，和第 2 种情况相同

综合以上两类分析，可以得出：

1. 如果当前节点值比给定的节点值大，到当前节点的左子数中寻找中序后继：
    1. 如果返回 `null` 说明给定节点右子树为空，那么中序后继就是当前节点
    2. 如果返回不为 `null` 那么返回的节点就是中序后继
2. 如果当前节点值比给定的节点值小或相等：返回右子树递归的结果

## 代码

```java
class Solution {
    public TreeNode inorderSuccessor(TreeNode root, TreeNode p) {
        return talgo(root, p);
    }

    private static TreeNode talgo(TreeNode node, TreeNode p) {
        if (node == null) return null;
        if (node.val <= p.val) {
            return talgo(node.right, p);
        } else {
            TreeNode left = talgo(node.left, p);
            return left != null ? left : node;
        }
    }
}
```
